import React, { useState, useEffect } from 'react'

import { Link, routes } from '@redwoodjs/router'
import { useLocation, useMatch } from '@redwoodjs/router'

import MobileMenu from '../MobileMenu/MobileMenu'
import Navbar from '../Navbar/Navbar'
const Header = () => {
  const location = useLocation()
  const homeRouteMatch = useMatch(location.pathname)
  const header = null

  const heroHeader =
    location.pathname === routes.home() ||
    location.pathname === routes.about() ||
    location.pathname === routes.employers() ||
    location.pathname.startsWith('/service')

  const [isHidden, setIsHidden] = useState(false)
  const [prevScrollPos, setPrevScrollPos] = useState(0)

  useEffect(() => {
    const handleScroll = () => {
      const currentScrollPos = window.scrollY
      const isHidden = currentScrollPos > prevScrollPos

      setPrevScrollPos(currentScrollPos)
      setIsHidden(isHidden)

      const header = document.querySelector('.header')

      if (header) {
        if (currentScrollPos > 100) {
          header.classList.add('header-bg')
        } else {
          header.classList.remove('header-bg')
        }
      }
    }

    window.addEventListener('scroll', handleScroll)

    return () => {
      window.removeEventListener('scroll', handleScroll)
    }
  }, [prevScrollPos])

  return (
    <>
      <header
        className={`header sticky-header ${heroHeader ? 'lightFg' : ''} ${
          isHidden ? 'hidden' : ''
        }`}
      >
        <div className="container">
          <Link className="logo" to={routes.home()}>
            {/* <img src="/images/logo.svg" alt="" className="logo1" /> */}
            <svg
              width="112"
              height="32"
              viewBox="0 0 112 32"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M5.78681 15.1733H0.0227772V1.95927C0.273387 1.9137 0.660694 1.84535 1.16191 1.777C1.66314 1.70865 2.18714 1.66309 2.68836 1.66309C3.78193 1.66309 4.57934 1.84535 5.05777 2.23265C5.53621 2.59718 5.78681 3.32623 5.78681 4.39702V15.1733ZM9.81936 25.3571C7.76891 25.3571 6.01464 24.9926 4.53376 24.2636C3.05288 23.5345 1.93653 22.5093 1.16191 21.1651C0.387301 19.8437 0 18.2945 0 16.5174V14.0569H5.76403V16.3807C5.76403 17.7249 6.15134 18.7729 6.90317 19.5248C7.655 20.2766 8.63466 20.6411 9.79658 20.6411C10.9585 20.6411 11.9382 20.2766 12.69 19.5248C13.4418 18.7729 13.8291 17.7249 13.8291 16.3807V14.0569H19.6387V16.5174C19.6387 18.2945 19.2514 19.8437 18.454 21.1651C17.6794 22.4865 16.5403 23.5117 15.0822 24.2636C13.6241 25.0154 11.8926 25.3571 9.81936 25.3571ZM19.6615 15.2416H13.8519V1.95927C14.1253 1.9137 14.5126 1.84535 15.0366 1.777C15.5378 1.70865 16.0618 1.66309 16.5631 1.66309C17.6566 1.66309 18.454 1.84535 18.9325 2.23265C19.4109 2.59718 19.6615 3.32623 19.6615 4.39702V15.2416Z"
                fill="#131623"
              />
              <path
                d="M33.24 25.289C32.3059 25.289 31.4858 25.1751 30.7567 24.9473C30.0277 24.7195 29.367 24.4689 28.7974 24.1727V19.3883C29.253 19.7528 29.7543 20.0946 30.3466 20.3908C30.939 20.6869 31.6225 20.8236 32.4199 20.8236C33.764 20.8236 34.812 20.3908 35.5639 19.525C36.3157 18.6593 36.6802 17.3834 36.6802 15.6519C36.6802 14.4445 36.5208 13.4876 36.179 12.7813C35.8373 12.0523 35.3588 11.5283 34.7665 11.1638C34.1513 10.822 33.4223 10.6397 32.5793 10.6397C32.0326 10.6397 31.5313 10.7081 31.0757 10.8448C30.62 10.9815 30.2327 11.141 29.9138 11.3232V22.7829H24.3092V10.5486C24.3092 9.93348 24.4459 9.40948 24.6965 8.99939C24.9471 8.5893 25.3344 8.22477 25.8356 7.90581C26.6103 7.42738 27.5671 7.04007 28.729 6.72111C29.891 6.40216 31.1668 6.24268 32.5565 6.24268C34.4931 6.24268 36.2246 6.56163 37.7055 7.22233C39.1863 7.86025 40.3483 8.88547 41.1912 10.298C42.0342 11.6877 42.4443 13.4876 42.4443 15.6975C42.4443 17.7935 42.0342 19.5478 41.2368 20.9831C40.4394 22.4184 39.3458 23.512 37.9561 24.241C36.5891 24.9017 35.0171 25.289 33.24 25.289ZM27.4077 31.7138C26.3369 31.7138 25.5395 31.5315 25.061 31.1442C24.5598 30.7569 24.3092 30.0734 24.3092 29.071V21.2793L29.9593 21.3249V31.3948C29.7087 31.4632 29.3442 31.5543 28.8885 31.6227C28.4329 31.6682 27.9317 31.7138 27.4077 31.7138Z"
                fill="#131623"
              />
              <path
                d="M52.4459 20.6414C53.7673 20.6414 54.7242 20.4136 55.2938 19.9351C55.8633 19.4567 56.1595 18.9099 56.1595 18.2492C56.1595 17.6341 55.9317 17.1328 55.476 16.7455C55.0203 16.381 54.3597 16.0393 53.4939 15.7659L51.5574 15.1735C50.2132 14.6951 49.0057 14.1939 47.9577 13.6471C46.9097 13.1003 46.0895 12.394 45.52 11.5055C44.9504 10.6398 44.6542 9.52341 44.6542 8.17923C44.6542 6.106 45.4516 4.46564 47.0236 3.21259C48.6184 1.98232 50.8055 1.36719 53.6306 1.36719C55.0431 1.36719 56.319 1.50388 57.4353 1.77727C58.5517 2.05067 59.4174 2.46076 60.0554 2.98476C60.6933 3.53155 61.0122 4.19225 61.0122 4.98964C61.0122 5.53643 60.8755 6.03765 60.6021 6.47052C60.3287 6.90339 59.987 7.26792 59.5997 7.54131C59.0529 7.17679 58.3011 6.83504 57.3442 6.53887C56.3873 6.24269 55.3393 6.106 54.223 6.106C53.0155 6.106 52.1269 6.28826 51.5574 6.67557C50.965 7.06287 50.6688 7.56409 50.6688 8.15644C50.6688 8.63488 50.8739 9.02219 51.2612 9.34115C51.6713 9.66011 52.2409 9.91072 53.0155 10.1385L55.0659 10.822C57.3442 11.5283 59.0757 12.4396 60.306 13.6015C61.5362 14.7407 62.1286 16.3127 62.1286 18.272C62.1286 20.368 61.3084 22.0767 59.6908 23.3753C58.0732 24.6739 55.7038 25.3346 52.6282 25.3346C51.1017 25.3346 49.7576 25.1752 48.5501 24.8562C47.3426 24.5372 46.4085 24.0588 45.6794 23.4437C44.9732 22.8285 44.6086 22.0995 44.6086 21.2793C44.6086 20.5958 44.7909 20.049 45.1782 19.5706C45.5655 19.1149 45.9984 18.7504 46.4768 18.4998C47.1603 19.0466 48.0033 19.5478 49.0057 19.9807C50.0309 20.4136 51.1701 20.6414 52.4459 20.6414Z"
                fill="#131623"
              />
              <path
                d="M68.2799 18.3628L68.052 14.5808L77.2563 13.1227C77.2107 12.4393 76.9145 11.8241 76.3677 11.2318C75.821 10.6394 75.0236 10.3432 73.9528 10.3432C72.8364 10.3432 71.9023 10.7078 71.1733 11.4596C70.4442 12.2114 70.0569 13.2594 70.0341 14.6492L70.2164 17.3148C70.4442 18.6362 71.0138 19.593 71.9479 20.1626C72.882 20.7322 73.9983 21.0284 75.2969 21.0284C76.3449 21.0284 77.3246 20.8917 78.2587 20.5955C79.1928 20.2993 79.9218 20.0031 80.4686 19.6842C80.8332 19.912 81.1521 20.2309 81.4027 20.6183C81.6533 21.0283 81.7672 21.4612 81.7672 21.9397C81.7672 22.6915 81.4711 23.3066 80.8787 23.8078C80.2864 24.3091 79.489 24.6736 78.441 24.9242C77.4157 25.1748 76.2083 25.2887 74.8641 25.2887C72.9503 25.2887 71.2188 24.9242 69.6696 24.1951C68.1432 23.4661 66.9357 22.3953 66.0471 20.9372C65.1814 19.5019 64.7485 17.6793 64.7485 15.4694C64.7485 13.8746 64.9992 12.4848 65.5232 11.3229C66.0244 10.161 66.7306 9.18132 67.5736 8.42949C68.4393 7.67766 69.3962 7.10809 70.4898 6.74357C71.5833 6.37904 72.7225 6.19678 73.9072 6.19678C75.5931 6.19678 77.0968 6.53852 78.3954 7.19922C79.694 7.88271 80.6964 8.79401 81.4255 9.97871C82.1545 11.1634 82.5191 12.5076 82.5191 14.034C82.5191 14.8314 82.314 15.4238 81.8812 15.8339C81.4483 16.244 80.8559 16.4718 80.0813 16.5857L68.2799 18.3628Z"
                fill="#131623"
              />
              <path
                d="M91.7689 17.8617L86.1644 17.7478V0.341741C86.3922 0.273393 86.7339 0.182262 87.1896 0.113914C87.6452 0.0455655 88.1465 0 88.6705 0C89.764 0 90.5614 0.182262 91.0399 0.569569C91.5183 0.934093 91.7689 1.64035 91.7689 2.66558V17.8617ZM86.1644 14.8316L91.7689 14.9455V24.6737C91.5411 24.7421 91.1993 24.8104 90.7437 24.8788C90.288 24.9471 89.7868 24.9699 89.2628 24.9699C88.192 24.9699 87.3946 24.7876 86.9162 24.4003C86.415 24.0358 86.1644 23.3295 86.1644 22.3499V14.8316Z"
                fill="#131623"
              />
              <path
                d="M103.707 25.3118C101.133 25.3118 99.0822 24.8106 97.5785 23.8082C96.0521 22.8057 95.3002 21.3248 95.3002 19.3655C95.3002 17.6796 95.8242 16.3582 96.8722 15.4469C97.9203 14.5356 99.4695 13.966 101.543 13.7382L106.555 13.2142V12.8041C106.555 11.9611 106.213 11.346 105.552 10.9815C104.892 10.6169 103.958 10.4119 102.727 10.4119C101.771 10.4119 100.859 10.5258 99.9479 10.7536C99.0366 10.9815 98.2164 11.2549 97.4874 11.5738C97.1912 11.346 96.9406 11.027 96.7128 10.617C96.5077 10.2069 96.3938 9.77399 96.3938 9.31833C96.3938 8.24754 96.9634 7.47293 98.1253 6.99449C98.8543 6.7211 99.6973 6.51606 100.654 6.37936C101.611 6.24266 102.545 6.17432 103.434 6.17432C106.031 6.17432 108.104 6.7211 109.653 7.79189C111.203 8.86267 112 10.5486 112 12.8497V21.3476C112 21.9628 111.84 22.4868 111.522 22.8741C111.203 23.2614 110.793 23.6031 110.291 23.8765C109.539 24.3322 108.605 24.6739 107.512 24.9473C106.395 25.1751 105.142 25.3118 103.707 25.3118ZM103.707 21.1198C104.254 21.1198 104.801 21.0742 105.347 20.9603C105.894 20.8464 106.304 20.7097 106.578 20.5274V17.0189L103.434 17.3151C102.613 17.3606 101.953 17.5429 101.474 17.8391C100.996 18.1353 100.745 18.5909 100.745 19.1833C100.745 19.7528 100.973 20.2313 101.429 20.5958C101.907 20.9375 102.659 21.1198 103.707 21.1198Z"
                fill="#131623"
              />
            </svg>
          </Link>

          <Navbar />
          <MobileMenu />
        </div>
      </header>
    </>
  )
}

export default Header
